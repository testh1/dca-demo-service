{"ts":1365194278366,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1365194678676,"patch":[[{"diffs":[[1,"var works = [ \n    {id: 2, title:\"Aeneid\", uri:\"http://data.perseus.org/citations/urn:cts:latinLit:phi0690.phi003.perseus-lat1:1.1\"},\n    {id:4, title:\"Georgicon\", uri:\"http://data.perseus.org/citations/urn:cts:latinLit:phi0690.phi002.perseus-lat1:1.1\"},\n    {id:6, first:\"Ecloga\", uri;\"http://data.perseus.org/citations/urn:cts:latinLit:phi0690.phi001.perseus-lat1:1\"}\n];\n\nequals = function(field, val, obj) { return obj[field] == val };\n\nequalsId = equals.bind(undefined, \"id\");\n\nexports.findById = function(req, res) {\n    var id = req.params.id;\n    console.log('Retrieving work: ' + id);\n\n    var found = works.filter(equalsId.bind(undefined, id))[0];\n    res.send(found ? {work:found} : null);\n};\n \nexports.findAll = function(req, res) {\n    res.send({ works : works });\n};\n \nexports.addWork = function(req, res) {\n    var work = req.body.work;\n    work.id = 1 + Math.max.apply(0, works.map(function(f){return f.id;}));\n    console.log('Adding work: ' + JSON.stringify(work));\n    works.push(work);\n    res.send({work : work });\n}\n \nexports.updateWork = function(req, res) {\n    var id = req.params.id;\n    var work = req.body.work;\n    console.log('Updating work: ' + id);\n    console.log(JSON.stringify(work));\n    var found = works.filter(equalsId.bind(undefined, id))[0];\n    for (var k in work)\n        found[k] = work[k];\n    res.send({work : found});\n}\n \nexports.deleteWork = function(req, res) {\n    var id = req.params.id;\n    console.log('Deleting work: ' + id);\n    var found = works.filter(equalsId.bind(undefined, id))[0];\n    works.splice(works.indexOf(found),1);\n    res.end();\n}"]],"start1":0,"start2":0,"length1":0,"length2":1600}]],"length":1600,"saved":false}
{"ts":1365194691339,"patch":[[{"diffs":[[0,"ga\", uri"],[-1,";"],[1,":"],[0,"\"http://"]],"start1":277,"start2":277,"length1":17,"length2":17}]],"length":1600,"saved":false}
{"ts":1365194700383,"patch":[[{"diffs":[[0,"1\"}\n];\n\n"],[1,"var "],[0,"equals ="]],"start1":366,"start2":366,"length1":16,"length2":20},{"diffs":[[0,"val };\n\n"],[1,"var "],[0,"equalsId"]],"start1":436,"start2":436,"length1":16,"length2":20}]],"length":1608,"saved":false}
{"ts":1365194704471,"patch":[[{"diffs":[[0,"res.end();\n}"],[1,"\n"]],"start1":1596,"start2":1596,"length1":12,"length2":13}]],"length":1609,"saved":false}
{"contributors":[],"silentsave":false,"ts":1365260981838,"patch":[[{"diffs":[[0,":6, "],[-1,"first"],[1,"title"],[0,":\"Ec"]],"start1":262,"start2":262,"length1":13,"length2":13}]],"length":1609,"saved":false}
{"contributors":[],"silentsave":false,"ts":1365261754786,"patch":[[{"diffs":[[0,"lat1:1\"}"],[1,",\n    {id:10, title:\"De Miraculis Mortuorum\", uri:\"http://books.google.com/books?id=GCdCAAAAcAAJ&printsec=frontcover&source=gbs_ge_summary_r&cad=0#v=onepage&q&f=false\"}"],[0,"\n];\n\nvar"]],"start1":361,"start2":361,"length1":16,"length2":184}]],"length":1777,"saved":false}
